# Release Process Documentation

## Overview

This document outlines the complete release process for the Monarch Money MCP Server Enhanced, including both manual and automated release procedures.

## Release Types

### 1. Automated Releases (Primary)
- **Trigger**: New `monarchmoney-enhanced` library versions
- **Frequency**: Every 6 hours monitoring
- **Output**: Git tags, GitHub releases, MCPB bundles, PyPI packages

### 2. Manual Releases (Feature Updates)
- **Trigger**: New features, documentation updates, bug fixes
- **Process**: Manual version updates and release creation
- **Output**: Same as automated releases

## Automated Release System

### GitHub Actions Workflows

#### 1. Auto-Release Workflow (`.github/workflows/auto-release.yml`)
```yaml
# Monitors monarchmoney-enhanced releases every 6 hours
# Automatically creates new releases when library updates
# Generates MCPB bundles and publishes to GitHub Releases
```

**Key Features:**
- Dependency monitoring via GitHub API
- Automatic version bumping
- MCPB bundle generation
- Release notes creation
- Asset upload to GitHub Releases

#### 2. PyPI Publishing (`.github/workflows/publish-pypi.yml`)
```yaml
# Publishes to PyPI on new git tags
# Builds Python packages using UV
# Secure token-based authentication
```

**Triggers:**
- New git tags matching `v*` pattern
- Manual workflow dispatch

### Release Assets Generated

Each release automatically includes:

1. **MCPB Bundle** (`monarch-money-enhanced-VERSION.mcpb`)
   - One-click installation file for Claude Desktop
   - Size: ~12-15MB (optimized with .mcpbignore)
   - Contains all dependencies and runtime

2. **Source Code** (`.tar.gz` and `.zip`)
   - Complete repository snapshot
   - Automatically generated by GitHub

3. **PyPI Package**
   - Python wheel and source distribution
   - Available via `pip install monarch-money-mcp-enhanced`

## Manual Release Process

### Prerequisites
- Node.js (for MCPB CLI)
- Python 3.8+ with UV
- Git repository access
- PyPI credentials (for manual PyPI releases)

### Step-by-Step Process

#### 1. Version Updates
```bash
# Update version in key files
# - pyproject.toml
# - manifest.json
# - Any version references in documentation
```

#### 2. Dependency Updates
```bash
uv sync  # Update to latest dependencies
```

#### 3. Documentation Updates
```bash
# Update CHANGELOG.md with new features
# Update README.md if needed
# Update any version-specific documentation
```

#### 4. MCPB Bundle Generation
```bash
# Install MCPB CLI if not already installed
npm install -g @anthropic-ai/mcpb

# Generate new bundle
mcpb pack

# Verify bundle integrity
# Output: monarch-money-enhanced-VERSION.mcpb
```

#### 5. Testing
```bash
# Test MCPB installation locally
# Verify all tools work correctly
# Check credential configuration
```

#### 6. Git Operations
```bash
# Stage all changes
git add .

# Commit with descriptive message
git commit -m "Release v0.9.2: Claude Desktop Extension Support

ðŸŽ‰ Major new feature: One-click installation via MCPB format
âœ¨ Updated to monarchmoney-enhanced v0.9.2
ðŸ“š Enhanced documentation with installation guides
ðŸŽ¯ Optimized bundle size and distribution

ðŸ¤– Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"

# Create and push tag
git tag v0.9.2
git push origin main
git push origin v0.9.2
```

#### 7. GitHub Release Creation
```bash
# Create release via GitHub CLI
gh release create v0.9.2 \
  --title "v0.9.2: Claude Desktop Extension Support" \
  --notes-file release_notes.md \
  monarch-money-enhanced-0.9.2.mcpb

# Or create via GitHub web interface
```

## Release Checklist

### Pre-Release âœ…
- [ ] Version updated in `pyproject.toml`
- [ ] Version updated in `manifest.json`  
- [ ] Dependencies updated (`uv sync`)
- [ ] CHANGELOG.md updated
- [ ] README.md updated if needed
- [ ] MCPB bundle generated and tested
- [ ] All tests passing
- [ ] Documentation reviewed

### Release âœ…
- [ ] Git commit with descriptive message
- [ ] Git tag created (`v0.9.2`)
- [ ] Changes pushed to main branch
- [ ] Tag pushed to remote
- [ ] GitHub release created
- [ ] MCPB bundle uploaded as release asset
- [ ] Release notes published

### Post-Release âœ…
- [ ] PyPI package published (automatic via GitHub Actions)
- [ ] Release announcement (if major)
- [ ] Documentation updates deployed
- [ ] Installation guides tested
- [ ] Community notification (if significant)

## Version Numbering Strategy

### Semantic Versioning (X.Y.Z)
- **X.Y**: Follows `monarchmoney-enhanced` library version
- **Z**: Patch releases for MCP server specific fixes/features

### Examples:
- `0.9.2`: Matches `monarchmoney-enhanced` v0.9.2
- `0.9.2-1`: Hypothetical patch for MCP server issues
- `1.0.0`: Major release when library reaches v1.0.0

## File Structure for Releases

```
Release Assets:
â”œâ”€â”€ monarch-money-enhanced-0.9.2.mcpb    # Claude Desktop Extension
â”œâ”€â”€ Source code (zip)                     # GitHub auto-generated  
â”œâ”€â”€ Source code (tar.gz)                  # GitHub auto-generated
â””â”€â”€ PyPI Package                          # Published separately

Repository Structure:
â”œâ”€â”€ manifest.json                         # MCPB configuration
â”œâ”€â”€ .mcpbignore                          # Bundle exclusions
â”œâ”€â”€ CHANGELOG.md                         # Version history
â”œâ”€â”€ RELEASE_PROCESS.md                   # This document
â”œâ”€â”€ pyproject.toml                       # Python project config
â””â”€â”€ server.py                           # Main MCP server
```

## Troubleshooting

### Common Issues

#### MCPB Bundle Generation Fails
```bash
# Check manifest.json validation
mcpb pack --dry-run

# Common fixes:
# - Fix manifest.json syntax errors
# - Update MCPB CLI: npm install -g @anthropic-ai/mcpb
# - Check file permissions
```

#### GitHub Actions Fail
- Check workflow logs in GitHub Actions tab
- Verify environment secrets are set
- Ensure PyPI tokens are valid
- Check rate limiting on GitHub API calls

#### Version Mismatch
- Ensure all version references are updated
- Check `pyproject.toml` and `manifest.json` match
- Verify dependency versions are compatible

### Emergency Release Process

For critical fixes requiring immediate release:

1. Create hotfix branch from main
2. Make minimal necessary changes
3. Update patch version only (e.g., 0.9.2 â†’ 0.9.3)
4. Follow abbreviated release process
5. Merge back to main after verification

## Automation Enhancements

### Future Improvements
- [ ] Automated CHANGELOG.md generation
- [ ] Automated documentation deployment
- [ ] Integration testing in CI/CD
- [ ] Multi-platform MCPB testing
- [ ] Dependency vulnerability scanning
- [ ] Performance benchmarking

### Monitoring
- GitHub Actions workflow success rates
- PyPI download statistics  
- MCPB installation success metrics
- User feedback and issue reports

## Contact & Support

For questions about the release process:
- **GitHub Issues**: Technical problems and bug reports
- **GitHub Discussions**: General questions and feedback
- **Documentation**: README.md and CHANGELOG.md for details

---

*This document is maintained alongside each release and should be updated when the release process changes.*